<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data>
    <!--ELEMENT 1.2-->
    <!--<record model="ir.actions.server" id="assign_sc_notes">
      <field name="child_ids" eval="[(6, 0, [])]"/>
      <field name="code"><![CDATA[if obj.sale_id:
      obj['x_sc_notes'] = obj.sale_id.x_sc_notes
elif obj.purchase_id:
      obj['x_sc_notes'] = obj.purchase_id.x_sc_notes
        ]]>
      </field>
      <field name="crud_model_id" eval="False"/>
      <field name="help" eval="False"/>
      <field name="link_field_id" eval="False"/>
      <field name="model_id" ref="stock.model_stock_picking"/>
      <field name="name">[JOS] Assign SC Notes on Creation of Stock Picking</field>
      <field name="sequence">5</field>
      <field name="state">code</field>
    </record>-->
    <record model="ir.actions.server" id="action_transfer_so_notes">
      <field name="child_ids" eval="[(6, 0, [])]"/>
      <field name="code"><![CDATA[obj.action_confirm()
for picking in obj.picking_ids:
  picking['x_sc_notes'] = obj.x_sc_notes
        ]]>
      </field>
      <field name="crud_model_id" eval="False"/>
      <field name="help" eval="False"/>
      <field name="link_field_id" eval="False"/>
      <field name="model_id" ref="sale_order_dates.model_sale_order"/>
      <field name="name">[JOS] Transfer SO SC Notes on Confirmation</field>
      <field name="sequence">5</field>
      <field name="state">code</field>
    </record>
    <record model="ir.actions.server" id="action_transfer_po_notes">
      <field name="child_ids" eval="[(6, 0, [])]"/>
      <field name="code"><![CDATA[obj.button_confirm()
for picking in obj.picking_ids:
  picking['x_sc_notes'] = obj.x_sc_notes
        ]]>
      </field>
      <field name="crud_model_id" eval="False"/>
      <field name="help" eval="False"/>
      <field name="link_field_id" eval="False"/>
      <field name="model_id" ref="purchase.model_purchase_order"/>
      <field name="name">[JOS] Transfer PO SC Notes on Confirmation</field>
      <field name="sequence">5</field>
      <field name="state">code</field>
    </record>
  <!--ELEMENT 1.4-->
  <record model="ir.actions.server" id="action_pre_sales_hold">
    <field name="child_ids" eval="[(6, 0, [])]"/>
    <field name="code"><![CDATA[if obj.x_hold != True:
    action_data = env.ref('phase2_ho_ps.hold_reason_wizard').read()[0]
    action_data.update({'context': {'default_x_so_id': obj.id}})
    action = action_data
else:
    obj['x_hold'] = False
    if obj.x_acc_hold != True:
      for picking in obj.picking_ids:
        picking['x_dns'] = False
      ]]>
    </field>
    <field name="crud_model_id" eval="False"/>
    <field name="help" eval="False"/>
    <field name="link_field_id" eval="False"/>
    <field name="model_id" ref="sale_order_dates.model_sale_order"/>
    <field name="name">[JOS] Hold Sales Order - Sales Open Wizard</field>
    <field name="sequence">5</field>
    <field name="state">code</field>
  </record>
  <record model="ir.actions.server" id="action_acc_hold">
    <field name="child_ids" eval="[(6, 0, [])]"/>
    <field name="code"><![CDATA[if obj.x_acc_hold != True:
    obj['x_acc_hold'] = True
    for picking in obj.picking_ids:
      picking['x_dns'] = True
else:
    obj['x_acc_hold'] = False
    if obj.x_hold != True:
      for picking in obj.picking_ids:
        picking['x_dns'] = False
      ]]>
    </field>
    <field name="crud_model_id" eval="False"/>
    <field name="help" eval="False"/>
    <field name="link_field_id" eval="False"/>
    <field name="model_id" ref="sale_order_dates.model_sale_order"/>
    <field name="name">[JOS] Hold Sales Order - Accounting</field>
    <field name="sequence">5</field>
    <field name="state">code</field>
  </record>
  <!--ELEMENT 1.6-->
  <record model="ir.actions.server" id="action_change_state">
    <field name="child_ids" eval="[(6, 0, [])]"/>
    <field name="code"><![CDATA[if obj.x_state in ['awaiting']:
      if obj.state in ['sale','cancel']:
        obj['x_state'] = obj.state
else:
      obj['x_state'] = obj.state
      ]]>
    </field>
    <field name="crud_model_id" eval="False"/>
    <field name="help" eval="False"/>
    <field name="link_field_id" eval="False"/>
    <field name="model_id" ref="sale_order_dates.model_sale_order"/>
    <field name="name">[JOS] Change x_state depening on state</field>
    <field name="sequence">5</field>
    <field name="state">code</field>
  </record>
  <record model="ir.actions.server" id="action_send_awaiting">
    <field name="child_ids" eval="[(6, 0, [])]"/>
    <field name="code"><![CDATA[obj['x_state'] = 'awaiting'
      ]]>
    </field>
    <field name="crud_model_id" eval="False"/>
    <field name="help" eval="False"/>
    <field name="link_field_id" eval="False"/>
    <field name="model_id" ref="sale_order_dates.model_sale_order"/>
    <field name="name">[JOS] Change x_state to awaiting</field>
    <field name="sequence">5</field>
    <field name="state">code</field>
  </record>
  <record model="ir.actions.server" id="action_set_est_ship_date">
    <field name="child_ids" eval="[(6, 0, [])]"/>
    <field name="code"><![CDATA[if obj.x_ship_date:
    obj['min_date']=obj.x_ship_date
      ]]>
    </field>
    <field name="crud_model_id" eval="False"/>
    <field name="help" eval="False"/>
    <field name="link_field_id" eval="False"/>
    <field name="model_id" ref="stock.model_stock_picking"/>
    <field name="name">[JOS] Set Est. Ship Date on Transfer</field>
    <field name="sequence">5</field>
    <field name="state">code</field>
  </record>
</data>
</openerp>
